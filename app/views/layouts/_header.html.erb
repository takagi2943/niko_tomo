<nav class="navbar navbar-expand-lg navbar-dark">
  <!--上部左端に配置-->
  <% if user_signed_in? %>
  <!--二胡のLOGO-->
    <%= link_to root_path, class: "navbar-brand", style: "margin-right: auto; margin-left: 0;" do %>
      <%= image_tag('Nikotomo (1).jpg', alt: "Niko Tomo", size: "150x80") %>
    <% end %>
  <% elsif admin_signed_in? %>
    <%= link_to admin_root_path, class: "navbar-brand", style: "margin-right: auto; margin-left: 0;" do %>
      <%= image_tag('Nikotomo (1).jpg', alt: "Niko Tomo", size: "150x80") %>
    <% end %>
  <% else %>
    <%= link_to root_path, class: "navbar-brand", style: "margin-right: auto; margin-left: 0;" do %>
      <%= image_tag('Nikotomo (1).jpg', alt: "Niko Tomo", size: "150x80") %>
    <% end %>
  <% end %>

  <div class="row">
    <div class="col">
      <div class="row">
        <div class="col-12 offert">
          <div class="collapse navbar-collapse" id="navbarSupportedContent">
            <ul class="navbar-nav mr-auto">
            <!--管理者がログインしている場合-->
            <% if admin_signed_in? %>
              <li class="nav-item active mx-2">
                <%= link_to admin_users_path, class: 'nav-link text-light' do %>
                  <i class="fa-solid fa-users"></i>
                  <span>会員一覧</span>
                <% end %>
              </li>

              <li class="nav-item active mx-2">
                <%= link_to admin_music_posts_path, class: 'nav-link text-light' do %>
                  <i class="fa-solid fa-music"></i>
                  <span>音楽共有</span>
                <% end %>
              </li>

              <li class="nav-item active mx-2">
                <%= link_to admin_groups_path, class: 'nav-link text-light' do %>
                  <i class="fa-solid fa-people-roof"></i>
                  <span>グループ</span>
                <% end %>
              </li>

              <li class="nav-item active mx-2">
                <%= link_to admin_labos_path, class: 'nav-link text-light' do %>
                  <i class="fa-solid fa-person-chalkboard"></i>
                  <span>探究室</span>
                <% end %>
              </li>

              <li class="nav-item active mx-2">
                <%= link_to admin_tags_path ,class: 'nav-link text-light' do %>
                  <i class="fa-solid fa-tags"></i>
                  <span>タグ</span>
                <% end %>
              </li>

              <li class="nav-item active mx-2">
                <%= link_to destroy_admin_session_path, method: :delete, class: 'nav-link text-light' do %>
                  <i class="fa-solid fa-right-from-bracket"></i>
                  <span>ログアウト</span>
                <% end %>
              </li>
              <li class="mx-2">
              <% if admin_signed_in? %>
                <%= form_with url: admin_search_path, method: :get, local: true do |form| %>
                <!--検索機能-->
                  <div class="d-flex m-0">
                    <%= form.text_field :search, placeholder: "会員検索", class: "form-control" %>
                    <%= form.button :type => "submit", class: "ml-2 btn btn-secondary" do %>
                      <i class="fa-solid fa-magnifying-glass"></i>
                    <% end %>
                  </div>
                  
              <!--<div class="form-group mt-2 mb-0 ml-auto">-->
              <!--  <%#= form.radio_button :search_model, "user", checked: true %>-->
              <!--  <%#= form.label :search_model_user, "会員検索", class: "m-0 mr-2" %>-->
              <!--  <%#= form.radio_button :search_model, "music_post" %>-->
              <!--  <%#= form.label :search_model_post, "音楽共有投稿検索", class: "m-0 mr-sm-2 m-lg-0" %>-->
              <!--  <%#= form.radio_button :search_model, "labo" %>-->
              <!--  <%#= form.label :search_model_labo, "探究室検索", class: "m-0 mr-sm-2 m-lg-0" %>-->
              <!--  <%#= form.radio_button :search_model, "group" %>-->
              <!--  <%#= form.label :search_model_group, "グループ検索", class: "m-0 mr-sm-2 m-lg-0" %>-->
              <!--</div>-->
                  
                <% end %>
              <% end %>
              </li>

            <% elsif user_signed_in? %>
              <!-- ユーザーがログインしている場合 -->
              <li class="nav-item active mx-2">
                <%= link_to user_path(current_user.id), class: 'nav-link text-light' do %>
                  <i class="fa-regular fa-address-card"></i>
                  <span>マイページ</span>
                <% end %>
              </li>

              <li class="nav-item active mx-2">
                <%= link_to music_posts_path, class: 'nav-link text-light' do %>
                  <i class="fa-solid fa-music"></i>
                  <span>音楽共有</span>
                <% end %>
              </li>

              <li class="nav-item active mx-2">
                <%= link_to labos_path, class: 'nav-link text-light' do %>
                  <i class="fa-solid fa-tags"></i>
                  <span>探究室</span>
                <% end %>
              </li>

              <li class="nav-item active mx-2">
                <%= link_to groups_path, class: 'nav-link text-light' do %>
                  <i class="fa-solid fa-people-roof"></i>
                  <span>グループ</span>
                <% end %>
              </li>

              <li class="nav-item active mx-2">
                <%= link_to destroy_user_session_path, method: :delete, class: 'nav-link text-light' do %>
                  <i class="fa-solid fa-right-from-bracket"></i>
                  <span>ログアウト</span>
                <% end %>
              </li>

              <li class="mx-2">
              <% if user_signed_in? %>
                <%= form_with url: users_path, method: :get, local: true do |form| %>
                  <div class="d-flex m-0">
                    <%= form.text_field :search, placeholder: "会員検索", class: "form-control" %>
                    <%= form.button :type => "submit", class: "ml-2 btn btn-secondary" do %>
                      <i class="fa-solid fa-magnifying-glass"></i>
                    <% end %>
                  </div>
              <!--<div class="form-group mt-2 mb-0 ml-auto">-->
              <!--  <%#= form.radio_button :search_model, "user", checked: true %>-->
              <!--  <%#= form.label :search_model_user, "会員検索", class: "m-0 mr-2" %>-->
              <!--  <%#= form.radio_button :search_model, "music_post" %>-->
              <!--  <%#= form.label :search_model_post, "音楽共有投稿検索", class: "m-0 mr-sm-2 m-lg-0" %>-->
              <!--  <%#= form.radio_button :search_model, "group" %>-->
              <!--  <%#= form.label :search_model_group, "グループ検索", class: "m-0 mr-sm-2 m-lg-0" %>-->
              <!--</div>-->
                <% end %>
              <% end %>
              </li>

            <% else %>
              <!-- どちらもログインしていない場合 -->
              <li class="nav-item active mx-2">
                <%= link_to about_path, class: 'nav-link text-light' do %>
                  <i class="fa-solid fa-book-open"></i>
                  <span>二胡について</span>
                <% end %>
              </li>

              <li class="nav-item active mx-2">
                <%= link_to labos_path, class: 'nav-link text-light' do %>
                  <i class="fa-solid fa-tags"></i>
                  <span>探究室</span>
                <% end %>
              </li>

              <li class="nav-item active mx-2">
                <%= link_to new_user_registration_path, class: 'nav-link text-light' do %>
                  <i class="fa-solid fa-user-plus"></i>
                  <span>新規登録</span>
                <% end %>
              </li>

              <li class="nav-item active mx-2">
                <%= link_to new_user_session_path, class: 'nav-link text-light' do %>
                  <i class="fa-solid fa-right-to-bracket"></i>
                  <span>ログイン</span>
                <% end %>
              </li>
            <% end %>
            </ul>
          </div>
        </div>
      </div>
      <div class="row mt-2">
        <div class="col text-left ml-5">
          <% if user_signed_in? %>
            <span class="text-signed-in" style="color: white;text-decoration: underline; text-decoration-color: white;">
              ようこそ、<%= current_user.nickname %>さん！
            </span>
          <% end %>
        </div>
      </div>
    </div>
  </div>

  <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
    <span class="navbar-toggler-icon"></span>
  </button>
</nav>