<nav class="navbar navbar-dark navbar-expand-md">
  <div class="container">
    <!--上部左端に配置-->
    <div class="d-lg-flex d-none align-items-center col-lg-4 mr-auto">
      <% if user_signed_in? %>
      <!--二胡のLOGO-->
        <%= link_to root_path, class: "navbar-brand", style: "margin-right: auto; margin-left: 0;" do %>
          <%= image_tag('Nikotomo (1).jpg', alt: "Niko Tomo", size: "100x80") %>
        <% end %>
      <% elsif admin_signed_in? %>
        <%= link_to admin_root_path, class: "navbar-brand", style: "margin-right: auto; margin-left: 0;" do %>
          <%= image_tag('Nikotomo (1).jpg', alt: "Niko Tomo", size: "100x80") %>
        <% end %>
      <% else %>
        <%= link_to root_path, class: "navbar-brand", style: "margin-right: auto; margin-left: 0;" do %>
          <%= image_tag('Nikotomo (1).jpg', alt: "Niko Tomo", size: "150x50") %>
        <% end %>
      <% end %>
    </div>

    <button class="header-btn navbar-toggler ml-auto" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse justify-content-end justify-content-lg-center" id="navbarSupportedContent">
      <ul class="navbar-nav">
      <!--管理者がログインしている場合-->
        <% if admin_signed_in? %>
          <li class="nav-item">
            <%= link_to admin_root_path, class: "nav-link header-nav-link" do %>
              <i class="fa-solid fa-users"></i>
              <span>会員一覧</span>
            <% end %>
          </li>
          <li class="nav-item">
            <%= link_to admin_customers_path, class: "nav-link header-nav-link" do %>
              <i class="fa-solid fa-people-roof"></i>
              <span>グループ</span>
            <% end %>
          </li>
          <li class="nav-item">
            <%= link_to admin_labo_comments_path, class: "nav-link header-nav-link" do %>
              <i class="fa-solid fa-person-chalkboard"></i>
              <span>探究室</span>
            <% end %>
          </li>
          <li class="nav-item">
          <%= link_to admin_tag_path, class: "nav-link header-nav-link" do %>
            <i class="fa-solid fa-tags"></i>
            <span>タグ</span>
          <% end %>
        </li>
        <li class="nav-item">
          <%= link_to destroy_admin_session_path, method: :delete, class: "nav-link header-nav-link" do %>
            <i class="fa-solid fa-right-from-bracket"></i>
            <span>ログアウト</span>
          <% end %>
        </li>
        <div class="header-search-box">
          <%= form_with url: admin_search_path, method: :get, local: true do |form| %>
            <div class="d-flex flex-column flex-sm-row-reverse flex-lg-column m-0">
              <div class="form-group d-flex m-0">
                <%= form.text_field :search, placeholder: "検索", class: "form-control" %>
                <%= form.button :type => "submit", class: "ml-2 btn btn-secondary" do %>
                  <i class="fa-solid fa-magnifying-glass"></i>
                <% end %>
              </div>
              <!--検索機能-->
              <div class="form-group mt-2 mb-0 ml-auto">
                <%= form.radio_button :search_model, "user", checked: true %>
                <%= form.label :search_model_user, "会員検索", class: "m-0 mr-2" %>
                <%= form.radio_button :search_model, "music_post" %>
                <%= form.label :search_model_post, "音楽共有投稿検索", class: "m-0 mr-sm-2 m-lg-0" %>
                <%= form.radio_button :search_model, "group" %>
                <%= form.label :search_model_labo, "探究室検索", class: "m-0 mr-sm-2 m-lg-0" %>
                <%= form.radio_button :search_model, "group" %>
                <%= form.label :search_model_group, "グループ検索", class: "m-0 mr-sm-2 m-lg-0" %>
              </div>
            </div>
          <% end %>
        </div>
      <% elsif user_signed_in? %>
      <!-- ユーザーがログインしている場合 -->
        <li class="nav-item">
          <%= link_to user_path(current_user.id), class: "nav-link header-nav-link" do %>
            <i class="fa-regular fa-address-card"></i>
            <span>マイページ</span>
          <% end %>
        </li>
        <li class="nav-item">
          <%= link_to user_groups_path(current_user.id), class: "nav-link header-nav-link" do %>
            <i class="fa-solid fa-people-roof"></i>
            <span>グループ</span>
          <% end %>
        </li>
        <li class="nav-item">
          <%= link_to labos_path, class: "nav-link header-nav-link" do %>
            <i class="fa-solid fa-cart-shopping"></i>
            <span>探究室</span>
          <% end %>
        </li>
        <li class="nav-item">
          <%= link_to user_music_posts_path(current_user.id), class: "nav-link header-nav-link" do %>
            <i class="fa-solid fa-music"></i>
            <span>音楽共有</span>
          <% end %>
        </li>
        <li class="nav-item">
          <%= link_to destroy_user_session_path, method: :delete, class: "nav-link header-nav-link" do %>
            <i class="fa-solid fa-right-from-bracket"></i>
            <span>ログアウト</span>
          <% end %>
        </li>
        <div class="header-search-box">
          <%= form_with url: search_users_path, method: :get, local: true do |form| %>
          <!--検索機能-->
            <div class="form-group d-flex m-0">
            <%= form.text_field :user_search_path, placeholder: "名前で検索", class: "form-control" %>
              <%= form.button :type => "submit", class: "ml-2 btn btn-secondary" do %>
              <i class="fa-solid fa-magnifying-glass"></i>
            <% end %>
            </div>
            <% if user_signed_in? %>
            <span class="text-signed-in">
            ようこそ、<%= current_user.nickname %>さん！
            </span>
            <% end %>
          <% end %>
        </div>
      <% else %>
      <!-- どちらもログインしていない場合 -->
        <li class="nav-item">
          <%= link_to about_path, class: "nav-link header-nav-link" do %>
            <i class="fa-solid fa-book-open"></i>
            <span>二胡について</span>
          <% end %>
        </li>
        <li class="nav-item">
          <%= link_to labos_path, class: "nav-link header-nav-link" do %>
            <i class="fa-solid fa-person-chalkboard"></i>
            <span>探究室</span>
          <% end %>
        </li>
        <li class="nav-item">
          <%= link_to new_user_registration_path, class: "nav-link header-nav-link" do %>
            <i class="fa-solid fa-user-plus"></i>
            <span>新規登録</span>
          <% end %>
        </li>
        <li class="nav-item">
          <%= link_to new_user_session_path, class: "nav-link header-nav-link" do %>
            <i class="fa-solid fa-right-to-bracket"></i>
            <span>ログイン</span>
          <% end %>
        </li>
      <% end %>
      </ul>
    </div>
  </div>
</nav>
