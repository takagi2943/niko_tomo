<div class='container-fluid'>
  <div class='row mt-4'>
    <div class="col-3">
      <%= render 'info', user: @user %>

      <!-- 二胡の情報を表示させる -->
      <% if @favorite_niko.present? %>
      <div class="row my-2 ml-2">
        <h4 style="border-bottom: 2px solid #F07C81; color: #000000; font-size: 24px; font-weight: bold;">My二胡</h4>
      </div>

      <div class="row">
        <div class="col">
          <%= image_tag @favorite_niko.get_niko_image, size: '100x100' %>
        </div>
      </div>

      <% if @favorite_niko.name.present? %>
      <div class="row">
        <div class="col">
          <h6 class="text-left mt-1">名前</h6>
        </div>
      </div>

      <div class="row">
        <div class="col">
          <h4 class="text-center"> <%= @favorite_niko.name %></h4>
        </div>
      </div>
      <% end %>

      <div class="row">
        <div class="col">
          <h6 class="text-left">使用材木</h6>
        </div>
      </div>

      <div class="row">
        <div class="col">
          <h4 class="text-center"><%= @favorite_niko.tree_type_i18n %></h4>
        </div>
      </div>

      <div class="row">
        <div class="col">
          <h6 class="text-left mt-1">特徴</h6>
        </div>
      </div>

      <div class="row">
        <div class="col">
          <h6 class="text-left"><%= @favorite_niko.feature %></h6>
        </div>
      </div>

      <% else %>
      <!-- 二胡の情報が無かったら -->
      <div class="row mt-3 mx-2">
        <h2 style="border-bottom: 2px solid #F07C81; color: #000000; font-size: 24px; font-weight: bold;">新規投稿</h2>
      </div>

      <!-- 音楽共有の投稿フォーム -->
      <div class="row">
        <div class="col">
          <%= render 'public/music_posts/form', music_post: @music_post || MusicPost.new %>
        </div>
      </div>
      <% end %>
    </div>

    <div class="col offset">
      <!-- 二胡の投稿があったならば投稿フォームを表示させる -->
      <% if @favorite_niko.present? %>
      <%= form_with model: @new_music_post, local: true do |f| %>
      <%= render 'layouts/error_messages', obj: @new_music_post %>
      <div class="row">
        <h6 style="border-bottom: 2px solid #F07C81; color: #000000; font-size: 24px; font-weight: bold;">新規投稿</h6>
      </div>

      <div class="row">
        <div class="col-4 text-left">
          <%= f.text_field :title, class: 'form-control title', placeholder: "タイトル" %>
          <div class="w-100 text-left">
            <%= f.file_field :image, accept: 'image/*' %>
          </div>
        </div>

        <div class="col text-left">
          <%= f.text_area :body, class: 'form-control body', placeholder: "投稿文" %>
        </div>

        <div class="col-2 d-flex align-items-end">
          <%= f.submit '投稿', class: 'btn btn-success' %>
        </div>
      </div>
      <% end %>
      <% end %>

      <!--投稿した音楽共有-->
      <div style="max-width: 600px; margin: auto;">
        <% @music_posts.each do |music_post| %>
          <div class="card mb-4 shadow-sm">
            <div class="card-header d-flex justify-content-start">
              <%= link_to music_post.title, music_post_path(music_post.id), class: 'text-dark' %>
            </div>
            <div class="card-body d-flex justify-content-start">
              <p class="card-text ml-2"><%= music_post.body %></p>
            </div>
            <div class="card-footer">
              <div class="d-flex justify-content-center align-items-center">
                <div class="btn-group mt-2 text-center">
                  <%= image_tag music_post.get_music_post_image, class: 'img-fluid', size: '100x100'%>
                </div>
                <div class="ml-auto mt-auto">
                  <small class="d-flex justify-content-right mt-auto "><%= music_post.created_at.strftime('%Y/%m/%d %H:%M') %></small>
                </div>
              </div>
              <!--いいねボタン・コメント数表示-->
              <% if music_post.present? %>
              <div class="d-flex justify-content-end">
                <div id="favorite_btn_<%= music_post.id %>" class="d-flex justify-content-end">
                  <%= render partial: 'public/favorites/btn', locals: { current_user: current_user, music_post: music_post } %>
                </div>
                <div class="d-flex justify-content-end">
                  <span>　|　</span>
                </div>
                <div id="comment_counter" class="d-flex justify-content-end mt-auto">
                  <%= render partial: "public/music_post_comments/counter", locals: { music_post: music_post } %>
                </div>
              </div>
              <% end %>
            </div>
          </div>
        <% end %>
      </div>
    </div>
  </div>
</div>
